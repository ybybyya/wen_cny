<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ† æ–°å¹´å¿«ä¹ 2026 ğŸ†</title>
<link rel="manifest" href="manifest.json">

<style>
body {
    margin: 0;
    overflow: hidden;
    background: radial-gradient(circle at bottom, #000010, #000000 70%);
    font-family: "Microsoft YaHei", sans-serif;
}

canvas {
    position: fixed;
    top: 0;
    left: 0;
}

#countdown {
    position: absolute;
    top: 20%;
    width: 100%;
    text-align: center;
    font-size: 80px;
    color: gold;
    text-shadow: 0 0 20px red, 0 0 40px orange;
    z-index: 10;
}

#message {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 90%;
    text-align: center;
    font-size: 24px;
    color: gold;
    line-height: 1.8;
    text-shadow: 
        0 0 10px #ff0000,
        0 0 20px #ff6600,
        0 0 40px gold;
    z-index: 10;
}

.hongbao {
    position: absolute;
    font-size: 30px;
    animation: fall 6s linear infinite;
}

@keyframes fall {
    from { transform: translateY(-100px) rotate(0deg); }
    to { transform: translateY(110vh) rotate(360deg); }
}
</style>
</head>
<body>

<div id="countdown">10</div>

<div id="message">
âœ¨ğŸ† ç¥éƒ‘æœ‰å½£ 2026å¹´ ğŸ†âœ¨<br><br>
ğŸ’– èº«ä½“å¥åº·<br>
ğŸ’¼ å·¥ä½œé¡ºå¿ƒ<br>
ğŸŒ¸ ç”Ÿæ´»é¡ºåˆ©<br>
ğŸ§§ æ–°å¹´å¿«ä¹<br><br>
ğŸ’• çˆ±æˆ‘å¤šå¤š ğŸ’•
</div>

<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// ğŸ”¥ çƒŸèŠ±ç²’å­
class Particle {
    constructor(x, y, color, radius=3, alpha=1, angle=null, speed=null){
        this.x = x;
        this.y = y;
        this.color = color;
        this.radius = radius;
        this.alpha = alpha;
        this.angle = angle || Math.random()*2*Math.PI;
        this.speed = speed || Math.random()*6+2;
    }
    update(){
        this.x += Math.cos(this.angle) * this.speed;
        this.y += Math.sin(this.angle) * this.speed + 0.3; // gravity
        this.alpha -= 0.02;
    }
    draw(){
        ctx.globalAlpha = this.alpha;
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2);
        ctx.fill();
        ctx.globalAlpha = 1;
    }
}

// çƒŸèŠ±æ•°ç»„
let fireworks = [];

// ğŸŒŒ æµæ˜Ÿ
let meteors = [];
function createMeteor(){
    meteors.push({
        x: Math.random()*canvas.width,
        y: Math.random()*canvas.height/2,
        length: Math.random()*80+50,
        speed: Math.random()*8+4,
        angle: Math.PI/4
    });
}

// ğŸ”¥ ç”ŸæˆçƒŸèŠ±
function launchFirework(x, y, color=null, count=80){
    let colors = color ? [color] : ["#ff0000","#ff6600","#ffff00","#ff00ff","#00ffff","#ffffff"];
    let p = [];
    for(let i=0;i<count;i++){
        p.push(new Particle(x, y, colors[Math.floor(Math.random()*colors.length)], Math.random()*3+1));
    }
    fireworks.push(p);
}

// ğŸ’– çˆ±å¿ƒçƒŸèŠ±
function launchHeart(x,y){
    const colors=["#ff69b4","#ff1493","#ff4500"];
    let p=[];
    for(let t=0;t<2*Math.PI;t+=0.2){
        let scale=10;
        let px = x + scale*16*Math.pow(Math.sin(t),3);
        let py = y - scale*(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t));
        p.push(new Particle(px, py, colors[Math.floor(Math.random()*colors.length)],3));
    }
    fireworks.push(p);
}

// ç»˜åˆ¶æ‰€æœ‰
function animate(){
    ctx.fillStyle="rgba(0,0,0,0.2)";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    fireworks.forEach((pArr,i)=>{
        pArr.forEach(p=>{
            p.update();
            p.draw();
        });
        if(pArr[0].alpha<=0) fireworks.splice(i,1);
    });

    meteors.forEach((m,i)=>{
        ctx.strokeStyle="white";
        ctx.lineWidth=2;
        ctx.beginPath();
        ctx.moveTo(m.x,m.y);
        ctx.lineTo(m.x - m.length*Math.cos(m.angle), m.y + m.length*Math.sin(m.angle));
        ctx.stroke();
        m.x -= m.speed*Math.cos(m.angle);
        m.y += m.speed*Math.sin(m.angle);
        if(m.y>canvas.height || m.x<0) meteors.splice(i,1);
    });

    requestAnimationFrame(animate);
}
animate();

// è‡ªåŠ¨éšæœºçƒŸèŠ±
setInterval(()=>{
    launchFirework(Math.random()*canvas.width, Math.random()*canvas.height/2);
}, 500);

// è‡ªåŠ¨æµæ˜Ÿ
setInterval(createMeteor, 2000);

// ç‚¹å‡»æ”¾çƒŸèŠ±
canvas.addEventListener("click", e=>{
    launchFirework(e.clientX,e.clientY);
    launchHeart(e.clientX,e.clientY);
});

// å€’æ•°
let count=10;
let cd=document.getElementById("countdown");
let timer=setInterval(()=>{
    count--;
    cd.innerText=count;
    if(count<=0){
        clearInterval(timer);
        cd.innerText="ğŸ† HAPPY NEW YEAR ğŸ†";
        // é¡µé¢åŠ è½½å®Œç«‹å³éœ‡åŠ¨
        if(navigator.vibrate) navigator.vibrate(300);
        // å‘çƒŸèŠ±ç»„æˆæ–‡å­—â€œéƒ‘æœ‰å½£â€
        setTimeout(()=>{
            // ç²—ç•¥æ‰‹åŠ¨å­—æ¯æ‹¼æˆå½¢çŠ¶
            const text="éƒ‘æœ‰å½£";
            ctx.font="80px Microsoft YaHei";
            ctx.fillStyle="white";
            ctx.fillText(text, canvas.width/2-120, canvas.height/2);
            // æ¯ä¸ªåƒç´ å‘å°çƒŸèŠ±
            let imgData=ctx.getImageData(0,0,canvas.width,canvas.height);
            for(let y=0;y<imgData.height;y+=8){
                for(let x=0;x<imgData.width;x+=8){
                    let index=(y*imgData.width+x)*4;
                    if(imgData.data[index+3]>128){
                        launchFirework(x,y);
                    }
                }
            }
            ctx.clearRect(0,0,canvas.width,canvas.height);
        },500);
    }
},1000);

// çº¢åŒ…
function createHongbao(){
    let hb=document.createElement("div");
    hb.className="hongbao";
    hb.innerText="ğŸ§§";
    hb.style.left=Math.random()*100+"vw";
    hb.style.animationDuration=(Math.random()*3+4)+"s";
    document.body.appendChild(hb);
    setTimeout(()=>hb.remove(),6000);
}
setInterval(createHongbao,800);

// æ³¨å†Œ PWA
if('serviceWorker' in navigator){
    navigator.serviceWorker.register('service-worker.js');
}
</script>
</body>
</html>
