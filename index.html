<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ† æ–°å¹´å¿«ä¹ 2026 ğŸ†</title>
<link rel="manifest" href="manifest.json">
<style>
body {
    margin: 0;
    overflow: hidden;
    background: radial-gradient(circle at bottom, #0b0c2c, #000010 80%);
    font-family: "Microsoft YaHei", sans-serif;
}

canvas {
    position: fixed;
    top: 0;
    left: 0;
}

#countdown {
    position: absolute;
    top: 15%;
    width: 100%;
    text-align: center;
    font-size: 80px;
    color: #ffd700;
    text-shadow: 0 0 20px #ff4500, 0 0 40px #ff6347, 0 0 60px #ffd700;
    animation: pulse 1s infinite alternate;
    z-index: 10;
}

@keyframes pulse {
    0% { transform: scale(1); opacity: 1; }
    100% { transform: scale(1.1); opacity: 0.9; }
}

#message {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 90%;
    text-align: center;
    font-size: 26px;
    color: #ffd700;
    line-height: 1.8;
    text-shadow: 0 0 15px #ffcc00, 0 0 30px #ffa500, 0 0 50px #ffff66;
    background: rgba(0,0,0,0.2);
    border-radius: 15px;
    padding: 15px;
    z-index: 10;
}

.hongbao {
    position: absolute;
    font-size: 36px;
    animation: fall linear infinite;
    transform-origin: center;
    opacity: 0.8;
}

@keyframes fall {
    0% { transform: translateY(-100px) rotate(0deg); opacity: 0.9; }
    100% { transform: translateY(110vh) rotate(360deg); opacity: 0.7; }
}
</style>
</head>
<body>

<div id="countdown">10</div>

<div id="message">
âœ¨ğŸ† ç¥éƒ‘æœ‰å½£ 2026å¹´ ğŸ†âœ¨<br><br>
ğŸ’– èº«ä½“å¥åº·<br>
ğŸ’¼ å·¥ä½œé¡ºå¿ƒ<br>
ğŸŒ¸ ç”Ÿæ´»é¡ºåˆ©<br>
ğŸ§§ æ–°å¹´å¿«ä¹<br><br>
ğŸ’• çˆ±æˆ‘å¤šå¤š ğŸ’•
</div>

<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// ğŸŒŸ æ˜Ÿæ˜Ÿ
let stars = [];
for(let i=0;i<100;i++){
    stars.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height, r: Math.random()*1.2+0.5, alpha: Math.random()*0.6+0.4});
}

// ğŸ”¥ çƒŸèŠ±ç²’å­
class Particle {
    constructor(x, y, color, radius=3){
        this.x = x;
        this.y = y;
        this.color = color;
        this.radius = radius;
        this.alpha = 1;
        this.angle = Math.random()*2*Math.PI;
        this.speed = Math.random()*5+2;
    }
    update(){
        this.x += Math.cos(this.angle) * this.speed;
        this.y += Math.sin(this.angle) * this.speed + 0.3;
        this.alpha -= 0.02;
    }
    draw(){
        ctx.save();
        ctx.globalAlpha = this.alpha;
        let gradient = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.radius);
        gradient.addColorStop(0, this.color);
        gradient.addColorStop(1, "rgba(0,0,0,0)");
        ctx.fillStyle = gradient;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2);
        ctx.fill();
        ctx.restore();
    }
}

// æµæ˜Ÿ
let meteors = [];
function createMeteor(){
    meteors.push({
        x: Math.random()*canvas.width,
        y: Math.random()*canvas.height/2,
        length: Math.random()*80+50,
        speed: Math.random()*6+4,
        angle: Math.PI/4
    });
}

// çƒŸèŠ±æ•°ç»„
let fireworks = [];
function launchFirework(x, y, color=null, count=60){
    const colors = color ? [color] : ["#ff0000","#ff8c00","#ffff00","#ff69b4","#00ffff","#ffffff"];
    let p=[];
    for(let i=0;i<count;i++){
        p.push(new Particle(x, y, colors[Math.floor(Math.random()*colors.length)], Math.random()*3+1));
    }
    fireworks.push(p);
}

// â¤ï¸ å¿ƒå½¢çƒŸèŠ±
function launchHeart(x,y){
    const colors=["#ff69b4","#ff1493","#ff4500"];
    let p=[];
    for(let t=0;t<2*Math.PI;t+=0.2){
        let scale=10;
        let px = x + scale*16*Math.pow(Math.sin(t),3);
        let py = y - scale*(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t));
        p.push(new Particle(px, py, colors[Math.floor(Math.random()*colors.length)],3));
    }
    fireworks.push(p);
}

// ğŸ¨ åŠ¨ç”»å¾ªç¯
function animate(){
    ctx.fillStyle="rgba(0,0,20,0.3)";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // æ˜Ÿæ˜Ÿé—ªçƒ
    stars.forEach(s=>{
        ctx.fillStyle="rgba(255,255,255,"+s.alpha+")";
        ctx.beginPath();
        ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
        ctx.fill();
        s.alpha += (Math.random()-0.5)*0.03;
        if(s.alpha>1) s.alpha=1;
        if(s.alpha<0.3) s.alpha=0.3;
    });

    // çƒŸèŠ±
    fireworks.forEach((pArr,i)=>{
        pArr.forEach(p=>{p.update(); p.draw();});
        if(pArr[0].alpha<=0) fireworks.splice(i,1);
    });

    // æµæ˜Ÿ
    meteors.forEach((m,i)=>{
        ctx.strokeStyle="rgba(255,255,255,0.8)";
        ctx.lineWidth=2;
        ctx.beginPath();
        ctx.moveTo(m.x,m.y);
        ctx.lineTo(m.x - m.length*Math.cos(m.angle), m.y + m.length*Math.sin(m.angle));
        ctx.stroke();
        m.x -= m.speed*Math.cos(m.angle);
        m.y += m.speed*Math.sin(m.angle);
        if(m.y>canvas.height || m.x<0) meteors.splice(i,1);
    });

    requestAnimationFrame(animate);
}
animate();

// è‡ªåŠ¨éšæœºçƒŸèŠ± & æµæ˜Ÿ
setInterval(()=>{launchFirework(Math.random()*canvas.width, Math.random()*canvas.height/2);},1000);
setInterval(createMeteor,3000);

// ç‚¹å‡»æ”¾çƒŸèŠ±
canvas.addEventListener("click", e=>{
    launchFirework(e.clientX,e.clientY);
    launchHeart(e.clientX,e.clientY);
});

// å€’æ•°
let count=10;
let cd=document.getElementById("countdown");
let timer=setInterval(()=>{
    count--;
    cd.innerText=count;
    if(count<=0){
        clearInterval(timer);
        cd.innerText="ğŸ† HAPPY NEW YEAR ğŸ†";
        if(navigator.vibrate) navigator.vibrate(300);

        setTimeout(()=>{
            const text="éƒ‘æœ‰å½£";
            ctx.font="80px Microsoft YaHei";
            ctx.fillStyle="white";
            ctx.fillText(text, canvas.width/2-120, canvas.height/2);
            let imgData=ctx.getImageData(0,0,canvas.width,canvas.height);
            for(let y=0;y<imgData.height;y+=8){
                for(let x=0;x<imgData.width;x+=8){
                    let index=(y*imgData.width+x)*4;
                    if(imgData.data[index+3]>128){
                        launchFirework(x,y);
                    }
                }
            }
            ctx.clearRect(0,0,canvas.width,canvas.height);
        },500);
    }
},1000);

// ğŸ§§ çº¢åŒ…
function createHongbao(){
    let hb=document.createElement("div");
    hb.className="hongbao";
    hb.innerText="ğŸ§§";
    hb.style.left=Math.random()*100+"vw";
    hb.style.animationDuration=(Math.random()*3+4)+"s";
    hb.style.transform = `rotate(${Math.random()*360}deg)`;
    document.body.appendChild(hb);
    setTimeout(()=>hb.remove(),6000);
}
setInterval(createHongbao,1200);

// PWA
if('serviceWorker' in navigator){
    navigator.serviceWorker.register('service-worker.js');
}
</script>
</body>
</html>
