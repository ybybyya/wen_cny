<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>ğŸ† éƒ‘æœ‰å½£ æ–°å¹´å¿«ä¹ ğŸ†</title>
<style>
body {
    margin: 0;
    overflow: hidden;
    background: radial-gradient(circle at bottom, #000010, #000);
    font-family: 'KaiTi','STKaiti','æ¥·ä½“','Arial',sans-serif;
}
canvas { display: block; }

.text {
    position: absolute;
    top: 15%;
    width: 100%;
    text-align: center;
    color: #fff;
    font-size: 90px;
    font-weight: bold;
    text-shadow:
      0 0 10px #fff,
      0 0 20px #ff99c1,
      0 0 40px #ff2e8c,
      0 0 60px #ff66aa;
    pointer-events: none;
    animation: glow 1.8s infinite alternate;
}
@keyframes glow {
    0% { text-shadow: 0 0 10px #fff,0 0 20px #ff99c1,0 0 40px #ff2e8c,0 0 60px #ff66aa; }
    100% { text-shadow: 0 0 20px #fff,0 0 40px #ff99c1,0 0 80px #ff2e8c,0 0 120px #ff66aa; }
}

.subtext {
    position: absolute;
    top: 28%;
    width: 100%;
    text-align: center;
    color: #ffb6c1;
    font-size: 50px;
    font-weight: bold;
    text-shadow: 0 0 10px #fff,0 0 20px #ff99c1;
    pointer-events: none;
    animation: glowSub 2s infinite alternate;
}
@keyframes glowSub {
    0% { text-shadow:0 0 5px #fff,0 0 10px #ff99c1; }
    100% { text-shadow:0 0 10px #fff,0 0 20px #ff99c1; }
}

.red-packet {
    position: absolute;
    font-size: 30px;
    pointer-events: none;
}
</style>
</head>
<body>
<div class="text">éƒ‘æœ‰å½£ æ–°å¹´å¿«ä¹</div>
<div class="subtext">æ–°å¹´å¿«ä¹ï¼Œä¸‡äº‹å¦‚æ„ ğŸ‰</div>
<canvas id="canvas"></canvas>
<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// --------- æ˜Ÿç©º ----------
let stars=[];
for(let i=0;i<120;i++){
    stars.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,size:Math.random()*2+0.5,alpha:Math.random(),delta:Math.random()*0.02+0.01});
}

// --------- çƒŸèŠ± ----------
let fireworks=[];
function Firework(x,y,isHeart=false){
    this.x=x; this.y=y;
    this.particles=[];
    const color=Math.random()*360;
    const numParticles=isHeart?130:80;
    for(let i=0;i<numParticles;i++){
        let angle=Math.random()*2*Math.PI;
        this.particles.push({
            x:x, y:y,
            angle:angle,
            speed:isHeart?Math.random()*2+2:Math.random()*6+2,
            alpha:1,
            color:color+Math.random()*60,
            isHeart:isHeart,
            scale:isHeart?Math.random()*2+1:Math.random()*1.2+0.8,
            trail:[{x:x,y:y}] // æ‹–å°¾æçŸ­
        });
    }
    this.update=function(){
        this.particles.forEach(p=>{
            if(p.isHeart){
                p.x+=Math.cos(p.angle)*p.speed;
                p.y+=Math.sin(p.angle)*p.speed+0.1;
                p.alpha-=0.008;
            }else{
                p.x+=Math.cos(p.angle)*p.speed;
                p.y+=Math.sin(p.angle)*p.speed+0.5;
                p.alpha-=0.02;
            }
            // æ‹–å°¾é•¿åº¦å‡å°‘
            p.trail.push({x:p.x,y:p.y});
            if(p.trail.length>2) p.trail.shift(); // åªä¿ç•™2ä¸ªç‚¹ï¼Œæ‹–å°¾éå¸¸çŸ­
        });
    };
    this.draw=function(){
        this.particles.forEach(p=>{
            ctx.globalAlpha=p.alpha;
            if(p.isHeart){
                const grad=ctx.createRadialGradient(p.x,p.y,0,p.x,p.y,6*p.scale);
                grad.addColorStop(0,"#ff2e8c");
                grad.addColorStop(0.5,"#ff99c1");
                grad.addColorStop(1,"rgba(255,182,193,0)");
                ctx.fillStyle=grad;
                drawHeart(p.x,p.y,6*p.scale);
            }else{
                ctx.fillStyle=`hsl(${p.color},100%,50%)`;
                ctx.beginPath();
                ctx.arc(p.x,p.y,3,0,2*Math.PI);
                ctx.fill();
            }
        });
        ctx.globalAlpha=1;
    };
}

function drawHeart(x,y,r){
    ctx.beginPath();
    const top=r*0.3;
    ctx.moveTo(x,y+top);
    ctx.bezierCurveTo(x,y,x-r,y,x-r,y+top);
    ctx.bezierCurveTo(x-r,y+r,x,y+r*1.5,x,y+r*2);
    ctx.bezierCurveTo(x,y+r*1.5,x+r,y+r,x+r,y+top);
    ctx.bezierCurveTo(x+r,y,x,y,x,y+top);
    ctx.fill();
}

// --------- çº¢åŒ… ----------
let redPackets=[];
function RedPacket(){
    this.el=document.createElement('div');
    this.el.className='red-packet';
    this.el.innerText='ğŸ§§';
    document.body.appendChild(this.el);
    this.x=Math.random()*canvas.width;
    this.y=-60;
    this.speedY=Math.random()*2+1;
    this.speedX=Math.random()*1-0.5;
    this.angle=0;
    this.rotateSpeed=(Math.random()*2-1)*2;
    this.update=()=>{
        this.y+=this.speedY;
        this.x+=this.speedX + Math.sin(this.y/50)*1;
        this.angle+=this.rotateSpeed;
        this.el.style.top=this.y+'px';
        this.el.style.left=this.x+'px';
        this.el.style.transform=`rotate(${this.angle}deg)`;
        if(this.y>window.innerHeight){document.body.removeChild(this.el); redPackets.splice(redPackets.indexOf(this),1);}
    }
    redPackets.push(this);
}

// --------- åŠ¨ç”» ----------
function animate(){
    ctx.fillStyle='rgba(0,0,0,0.15)';
    ctx.fillRect(0,0,canvas.width,canvas.height);

    stars.forEach(s=>{
        s.alpha+=s.delta;
        if(s.alpha>1 || s.alpha<0) s.delta*=-1;
        ctx.globalAlpha=s.alpha;
        ctx.fillStyle='white';
        ctx.beginPath();
        ctx.arc(s.x,s.y,s.size,0,2*Math.PI);
        ctx.fill();
    });
    ctx.globalAlpha=1;

    fireworks.forEach((f,i)=>{
        f.update(); f.draw();
        if(f.particles[0].alpha<=0) fireworks.splice(i,1);
    });
    redPackets.forEach(r=>r.update());

    requestAnimationFrame(animate);
}

// --------- è‡ªåŠ¨ç”Ÿæˆ ----------
setInterval(()=>fireworks.push(new Firework(Math.random()*canvas.width,Math.random()*canvas.height/2)),700);
setInterval(()=>fireworks.push(new Firework(Math.random()*canvas.width,Math.random()*canvas.height/2,true)),2200);
setInterval(()=>new RedPacket(),800);

// ç‚¹å‡»ç”Ÿæˆå¿ƒå½¢çƒŸèŠ±
canvas.addEventListener('click',e=>{
    fireworks.push(new Firework(e.clientX,e.clientY,true));
});

// é¡µé¢éœ‡åŠ¨
window.onload=()=>{if(navigator.vibrate) navigator.vibrate([100,50,100]);};

animate();
</script>
</body>
</html>
